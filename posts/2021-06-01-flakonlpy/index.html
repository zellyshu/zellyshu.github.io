<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>CentOS 7 + Flask + gunicorn + Nginx 조합으로 Oracle Cloud에서 돌아가는 서비스 만들어보기 | ZS Log</title>
<meta name=keywords content="CentOS7,Flask,gunicorn,Nginx,Python,OracleCloud,Konlpy">
<meta name=description content="Intro 본 포스팅은 Python의 한국어 형태소 분석 라이브러리인 konlpy를 활용하여 CentOS 7 + Flask + gunicorn + Nginx 조합으로 웹 애플리케이션 서비스를 만들어본 토이 프로젝트 개발기다. 개발된 서비스는 링크(클릭)를 통하여 이동하면 사용할 수 있으나, 이용자에게 제공되는 완전하고 안정된 형태의 서비스라기보다 Oracle Cloud의 무료 티어를 활용해보기 위한 테스트 목적이 강하므로 이 점을 인지하여 준다면 감사할 것 같다. (갑자기 다운되거나 오류 발생 확률 매우매우매우 높음ㅠㅠ)
왜 만들었나? 취직하여 일을 시작한 지 얼마 되지 않았을 무렵, 사내 팀에서 AWS를 사용하고 있어 자연스레 클라우드 환경에 관심이 많아진 상태였다.">
<meta name=author content="Me">
<link rel=canonical href=https://zellyshu.github.io/posts/2021-06-01-flakonlpy/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.4b54530d30efae64eba84ee206079ce1207bf622508462734d7ccd0adf8874ce.css integrity="sha256-S1RTDTDvrmTrqE7iBgec4SB79iJQhGJzTXzNCt+IdM4=" rel="preload stylesheet" as=style>
<link rel=icon href=https://zellyshu.github.io/favicon.png>
<link rel=icon type=image/png sizes=16x16 href=https://zellyshu.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://zellyshu.github.io/favicon.png>
<link rel=apple-touch-icon href=https://zellyshu.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://zellyshu.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.88.1">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/monokai.min.css integrity="sha512-z8wQkuDRFwCBfoj7KOiu1MECaRVoXx6rZQWL21x0BsVVH7JkqCp1Otf39qve6CrCycOOL5o9vgfII5Smds23rg==" crossorigin=anonymous referrerpolicy=no-referrer>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-183828759-1','auto'),ga('send','pageview'))</script><meta property="og:title" content="CentOS 7 + Flask + gunicorn + Nginx 조합으로 Oracle Cloud에서 돌아가는 서비스 만들어보기">
<meta property="og:description" content="Intro 본 포스팅은 Python의 한국어 형태소 분석 라이브러리인 konlpy를 활용하여 CentOS 7 + Flask + gunicorn + Nginx 조합으로 웹 애플리케이션 서비스를 만들어본 토이 프로젝트 개발기다. 개발된 서비스는 링크(클릭)를 통하여 이동하면 사용할 수 있으나, 이용자에게 제공되는 완전하고 안정된 형태의 서비스라기보다 Oracle Cloud의 무료 티어를 활용해보기 위한 테스트 목적이 강하므로 이 점을 인지하여 준다면 감사할 것 같다. (갑자기 다운되거나 오류 발생 확률 매우매우매우 높음ㅠㅠ)
왜 만들었나? 취직하여 일을 시작한 지 얼마 되지 않았을 무렵, 사내 팀에서 AWS를 사용하고 있어 자연스레 클라우드 환경에 관심이 많아진 상태였다.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://zellyshu.github.io/posts/2021-06-01-flakonlpy/"><meta property="og:image" content="https://zellyshu.github.io/cover.png"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-06-01T00:00:00+00:00">
<meta property="article:modified_time" content="2021-06-01T00:00:00+00:00"><meta property="og:site_name" content="ZS Log">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://zellyshu.github.io/cover.png">
<meta name=twitter:title content="CentOS 7 + Flask + gunicorn + Nginx 조합으로 Oracle Cloud에서 돌아가는 서비스 만들어보기">
<meta name=twitter:description content="Intro 본 포스팅은 Python의 한국어 형태소 분석 라이브러리인 konlpy를 활용하여 CentOS 7 + Flask + gunicorn + Nginx 조합으로 웹 애플리케이션 서비스를 만들어본 토이 프로젝트 개발기다. 개발된 서비스는 링크(클릭)를 통하여 이동하면 사용할 수 있으나, 이용자에게 제공되는 완전하고 안정된 형태의 서비스라기보다 Oracle Cloud의 무료 티어를 활용해보기 위한 테스트 목적이 강하므로 이 점을 인지하여 준다면 감사할 것 같다. (갑자기 다운되거나 오류 발생 확률 매우매우매우 높음ㅠㅠ)
왜 만들었나? 취직하여 일을 시작한 지 얼마 되지 않았을 무렵, 사내 팀에서 AWS를 사용하고 있어 자연스레 클라우드 환경에 관심이 많아진 상태였다.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://zellyshu.github.io/posts/"},{"@type":"ListItem","position":2,"name":"CentOS 7 + Flask + gunicorn + Nginx 조합으로 Oracle Cloud에서 돌아가는 서비스 만들어보기","item":"https://zellyshu.github.io/posts/2021-06-01-flakonlpy/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"CentOS 7 + Flask + gunicorn + Nginx 조합으로 Oracle Cloud에서 돌아가는 서비스 만들어보기","name":"CentOS 7 \u002b Flask \u002b gunicorn \u002b Nginx 조합으로 Oracle Cloud에서 돌아가는 서비스 만들어보기","description":"Intro 본 포스팅은 Python의 한국어 형태소 분석 라이브러리인 konlpy를 활용하여 CentOS 7 + Flask + gunicorn + Nginx 조합으로 웹 애플리케이션 서비스를 만들어본 토이 프로젝트 개발기다. 개발된 서비스는 링크(클릭)를 통하여 이동하면 사용할 수 있으나, 이용자에게 제공되는 완전하고 안정된 형태의 서비스라기보다 Oracle Cloud의 무료 티어를 활용해보기 위한 테스트 목적이 강하므로 이 점을 인지하여 준다면 감사할 것 같다. (갑자기 다운되거나 오류 발생 확률 매우매우매우 높음ㅠㅠ)\n왜 만들었나? 취직하여 일을 시작한 지 얼마 되지 않았을 무렵, 사내 팀에서 AWS를 사용하고 있어 자연스레 클라우드 환경에 관심이 많아진 상태였다.","keywords":["CentOS7","Flask","gunicorn","Nginx","Python","OracleCloud","Konlpy"],"articleBody":"Intro 본 포스팅은 Python의 한국어 형태소 분석 라이브러리인 konlpy를 활용하여 CentOS 7 + Flask + gunicorn + Nginx 조합으로 웹 애플리케이션 서비스를 만들어본 토이 프로젝트 개발기다. 개발된 서비스는 링크(클릭)를 통하여 이동하면 사용할 수 있으나, 이용자에게 제공되는 완전하고 안정된 형태의 서비스라기보다 Oracle Cloud의 무료 티어를 활용해보기 위한 테스트 목적이 강하므로 이 점을 인지하여 준다면 감사할 것 같다. (갑자기 다운되거나 오류 발생 확률 매우매우매우 높음ㅠㅠ)\n왜 만들었나? 취직하여 일을 시작한 지 얼마 되지 않았을 무렵, 사내 팀에서 AWS를 사용하고 있어 자연스레 클라우드 환경에 관심이 많아진 상태였다. 물론, 대학원생 시절 AWS와 GCP를 사용해본 적은 있으나 (딥러닝 모델 학습하다가 한달에 몇백만원 찍히고 놀래서 서버 다 내린 건 언젠가 풀 또 하나의 이야기…) 완전히 친숙하다고 이야기하기엔 아주 애매한 사이였고, 클라우드 환경 하에서 웹 애플리케이션 서비스를 하나 만들어 배포해보면 지금보다는 더 익숙해지지 않을까 라는 결론에 자연스레 이르렀다.\nAWS와 GCP 중 어떤 걸 선택하여 테스트해볼까 고민하던 중, Oracle Cloud의 무료 티어가 눈에 들어오게 되었고 생각보다 괜찮은 사양이었기 때문에 이왕 해보는 거 기존에 사용해본 적 없었던 것을 사용해보자라는 마음으로 Oracle Cloud를 선택하게 되었다.\n처음 목적은 클라우드 환경과 친숙해지기 + flask와 gunicorn 조합을 활용해보기 였기 때문에 석사과정 때 몇 날 며칠을 밤새 만들었던 ‘한국어 형태소 분석기’ 의 데모 서비스를 그대로 올려 사용하려 했다. 하지만 무료 티어의 한계로 인해(ㅠㅠ) 선학습된 tensorflow 모델을 올릴 때 memory out이 발생하는 등의 자원부족으로 인한 오류가 발생하였고, 대체할 만한 가벼운 서비스를 빠르게 만들어보아야 겠다고 생각하게 되었다.\n무언가를 입력하면 어떠한 결과가 출력되는 형태의 서비스를 생각하다보니, konlpy에서 지원하는 형태소 분석기마다의 모든 결과를 뿌릴 수 있도록 하는 웹페이지를 만들면 어떨까 하는 생각이 들었다. 화면도 조금만 수정하면 될 것 같아서 빠르게 실행에 옮겼다.\nCentOS 7 + Flask + gunicorn + Nginx OS는 CentOS 7로 결정하고, Flask와 gunicorn 조합을 활용해보기로 마음 먹었다. 아래는 간략한 설명(을 가장한 사족)이다.\nCentOS 7 CentOS 8로 해볼까 하다가 지원 관련 이슈가 괜히 신경쓰여서 7로 선택했다. 선택해 놓고 보니 CentOS 지원 종료 이슈가 계속 마음에 걸려 언젠가는 Rocky Linux로 변경해볼까 하는 생각이 계속 든다…\nFlask Flask는 Django와 달리 매우매우 가볍다. 또한, 붙이고 싶은 대로 이것저것 붙이는 것이 자유로운 웹 프레임워크다. Tensorflow로 선학습된 모델을 올려 가볍게 테스트용 서비스를 만들 때 자주 사용했었다. 하지만, 너무 자유로워서 이게 왜 돌아가는 거지 싶을 때가 종종 있었다…\ngunicorn 기존에는 uwsgi를 자주 사용했었고, 이번에도 사용하려 하였다. 하지만, uwsgi가 자원을 많이 소모한다는 정보를 어디선가 들었고, 테스트의 목적이라면 전혀 사용해본 적이 없는 것을 사용해보아야 진정한 테스트가 아니겠는가라는 이유로 gunicorn을 활용하게 되었다. 실제로 적용해보고 나니 굉장히 쉽고 빨라서 다른 개발에도 사용하면 괜찮겠다란 생각이 들었다.\nNginx Apache는 사내에서도 사용해 볼 일이 있었기 때문에 스터디 목적으로라도 Nginx를 적용해보아야 겠다는 생각을 했고, 실제로 적용해보니 굉장히 가볍고 빨랐다. 최대한 빠르게 만들어서 테스트해야지라는 목적에도 잘 부합하는 선택이었다고 생각한다.\n이외의 설정들 FrontEnd 이전에 bootstrap 기반의 테마를 다운받아 적당히 커스텀했던 것을 가져와서 사용하였다. 당시 Frontend에 대한 경험이 너무 적었고, (물론 지금이라고 더 낫다고 할 순 없지만…) 물어볼 사람도 너무나 적었기 때문에 하나하나 뜯어가며 하드코딩했던 기억이 난다. 당시에도 반응형으로 만들고 싶었지만, 모바일을 비롯 해상도에 따라 깨져 보이는 것은 본인도 알고 있으며(ㅠㅠㅠ), 관련 분야 실력이 부족한 것을 한탄할 뿐이다.\nURL 접근은 ‘내도메인한국‘에서 별도의 URL을 생성해서 redirect 해주는 형태로 쉽게 접근할 수 있도록 하였다. 실제 서비스가 아니기 때문에 SSL 같은 요소는 따로 적용하지 않았다.\n설치 python 및 nginx 를 설치한다.\nsudo yum install python-pip python-devel gcc nginx Konlpy 라이브러리를 사용하기 위한 선행 설치 요건들을 설치해준다.\nsudo yum install gcc-c++ java-1.8.0-openjdk-devel sudo yum install curl git bash (curl -s https://raw.githubusercontent.com/konlpy/konlpy/master/scripts/mecab.sh) 설치가 완료되면, pip를 통하여 flask와 gunicorn을 설치해준다.\n관리가 용이하도록 virtualenv 모듈을 통하여 가상환경을 만들어 설치해주었다.\nvirtualenv venv source venv/bin/activate pip install gunicorn flask konlpy 설치 완료 후, konlpy 라이브러리가 잘 설치되었는지 확인해보았다.\nimport konlpy mecab = konlpy.tab.Mecab() print(mecab.pos(\"아버지가 방에 들어가신다.\")) 확인 결과 다음과 같이 출력이 잘 되었다.\ngunicorn을 실행하기 위하여 wsgi.py 를 만든 뒤, 다음의 명령어를 입력한다.\n wsgi.py  gunicorn --bind 0.0.0.0:5000 wsgi:app 이제 시스템에 서비스를 등록하고, 관련 설정을 해준다.\nsudo vi /etc/systemd/system/flask_konlpy_webapp.service [Unit] Description=Gunicorn instance to serve flask_konlpy_webapp After=network.target [Service] User=opc Group=nginx WorkingDirectory=/home/opc/flask_konlpy_webapp Environment=\"PATH=/home/opc/flask_konlpy_webapp/venv/bin\" ExecStart=/home/opc/flask_konlpy_webapp/venv/bin/gunicorn --workers 3 -t 120 --bind unix:flask_konlpy_webapp.sock -m 007 wsgi:app [Install] WantedBy=multi-user.target 서비스를 시작하고 서비스의 상태를 확인해보자.\nsudo systemctl start flask_konlpy_webapp.service sudo systemctl enable flask_konlpy_webapp.service sudo systemctl status flask_konlpy_webapp.service Active: active (running)으로 잘 실행되고 있음을 확인할 수 있다.\nNginx 관련 설정은 다음과 같이 진행한다.\nsudo vi /etc/nginx/nginx.conf Server 부분을 찾아서 다음과 같이 추가 및 수정해준다.\nserver_name 부분의 server_domain_or_IP는 본인의 환경에 맞게 설정해준다.\nserver { listen 80; server_name server_domain_or_IP; include /etc/nginx/default.d/*.conf; location / { proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_http_version 1.1; proxy_set_header Connection \"\"; proxy_pass http://unix:/home/opc/flask_konlpy_webapp/flask_konlpy_webapp.sock; } error_page 404 /404.html; location = /40x.html { } error_page 500 502 503 504 /50x.html; location = /50x.html { } } Nginx 관련 접근 권한 및 설정을 변경해준다.\nsudo usermod -a -G opc nginx chmod 710 /home/opc sudo nginx -t Nginx 설정이 완료되었다면, Nginx 서비스를 시작해주도록 하자.\nsudo systemctl start nginx sudo systemctl enable nginx Active: active (running)으로 잘 실행되고 있음을 확인할 수 있다.\n서비스 서비스는 링크를 선택하면 사용할 수 있고, 링크를 선택하면 다음과 같은 화면이 나온다.\n아무 소개가 없으면 너무 허전할 것 같아 간단한 소개와 형태소 분석 입출력 창으로 이동하는 버튼을 만들어 놓았다. (그래도 휑해보이는 건 디자인 감각이 부족한 탓으로 돌려본다…ㅠㅠ)\nClick Me ! 라는 (다소 어이없는) 문구의 버튼을 클릭하면 형태소 분석 입출력 창으로 이동하게 되며, 원하는 형태소 분석기를 선택 후 Analysis 버튼을 누르면 해당되는 형태소 분석기를 통해 분석된 결과가 분석 결과창에 출력되도록 했다.\n형태소 분석기의 경우 다음의 5가지 중 하나를 선택할 수 있고, 각 형태소 분석기마다의 결과는 다음과 같다. 입력 문장은 ‘아버지가방에들어가셨다.‘로 하였으며, 띄어쓰기를 하지 않은 이유는 형태소 분석기들이 ‘아버지가/방에’로 분석할지 ‘아버지/가방에’로 분석할지 궁금해서였다. 분석 결과는 어절 단위와 음절 단위 중 이용하는 형태소 분석기에 따라 입력 값의 전처리 방향에 대해 조금이나마 도움을 줄 수 있지 않을까 싶었다.\n  꼬꼬마\n  ‘아버지’와 ‘가방’으로 분석되었다.\n      코모란\n  ‘아버지’와 ‘가방’으로 분석되었다.\n      한나눔\n  ‘아버지가방에들어가’로 분석된 것으로 보아 음절 단위의 분석은 다소 어려움이 있는 것으로 보인다.\n      Mecab\n  ‘아버지’ 와 ‘방’으로 분석되었다.\n      Okt\n  ‘아버지’ 와 ‘가방’으로 분석되었다.\n      결과 물론, 예시 문장 하나만으로 어떠한 형태소 분석기가 음절 단위의 형태소 분석을 모두 잘 해낸다와 같은 결과는 과도한 해석일 것이다. 다만, konlpy에서 지원하는 한국어 형태소 분석기는 어절 단위의 분석이 음절 단위의 분석보다 분석 정확도가 높으므로 형태소 분석기를 사용할 때 입력 값을 적절히 전처리 해주면 보다 좋은 분석 결과를 도출할 수 있다라는 (당연한 결과는) 것은 알 수 있었다.\n물론 해당 서비스의 개발 목적이 형태소 분석기 자체가 아니라 Flask + gunicorn + Nginx 조합으로 웹 애플리케이션 서비스를 배포해보자 라는 목적이었기 때문에 일련의 성과는 얻을 수 있었다고 생각한다. 간단한 형태의 서비스도 이렇게나 머리 아픈데 완전한 형태의 서비스를 만들고, 지속적으로 유지보수 및 업데이트 해나가는 개발자 분들에게 존경을 표하는 바이다…\n후기  KKma와 okt가 다른 형태소 분석기에 비해 유독 느리다. 일정 시간이 넘어버리면 timeout이 되어 아예 오류 페이지로 이동해버린다. (ㅠㅠ) .sock 서비스 접근 권한 오류가 발생했었다. 처음엔 에러 원인도 몰랐다가 error_log를 찍어서 보니 접근 권한 오류가 발생한 것을 확인할 수 있었고, 수정했다. Oracle Cloud의 무료 티어가 생각보다 쓸만하다는 생각이 계속 들었다. 간단한 서비스라면 무료 티어를 활용하는 방안도 하나의 선택지가 될 것으로 보인다. 설계 자체에 대한 아쉬움이 계속 남는다. 석사과정 당시엔 관련 서비스 설계에 대한 지식이 부족했고, 돌아만 가면 되지라는 생각으로 만들었던 서비스이기 때문에 완성도가 굉장히 조악하다. 만약 지금이라면 구조 자체를 형태소 분석기 모델이 돌아가는 RESTAPI 서버 하나와 React or Vue로 구성된 FrontEnd 서버 하나로 이원화시켜 운영할 것 같다. Backend는 값에 대해서만 처리하고, Frontend에서는 입출력단만 처리하여 뿌릴 수 있도록 하는 형태로 하면 어땠을까 생각해본다. 개발된 코드는 Github에 올려두었다. 굉장히 조악하고, 미흡한 코드지만 조금이나마 도움이 되었으면 한다…  Reference  https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-gunicorn-and-nginx-on-centos-7  ","wordCount":"1171","inLanguage":"en","datePublished":"2021-06-01T00:00:00Z","dateModified":"2021-06-01T00:00:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zellyshu.github.io/posts/2021-06-01-flakonlpy/"},"publisher":{"@type":"Organization","name":"ZS Log","logo":{"@type":"ImageObject","url":"https://zellyshu.github.io/favicon.png"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://zellyshu.github.io/ accesskey=h title="ZS Log (Alt + H)">ZS Log</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://zellyshu.github.io/archives/ title=Archive>
<span>Archive</span>
</a>
</li>
<li>
<a href=https://zellyshu.github.io/categories/ title=Categories>
<span>Categories</span>
</a>
</li>
<li>
<a href=https://zellyshu.github.io/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
<li>
<a href=https://zellyshu.github.io/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://zellyshu.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://zellyshu.github.io/posts/>Posts</a></div>
<h1 class=post-title>
CentOS 7 + Flask + gunicorn + Nginx 조합으로 Oracle Cloud에서 돌아가는 서비스 만들어보기
</h1>
<div class=post-meta><span title="2021-06-01 00:00:00 +0000 UTC">June 1, 2021</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;Me
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#intro aria-label=Intro>Intro</a></li>
<li>
<a href=#%ec%99%9c-%eb%a7%8c%eb%93%a4%ec%97%88%eb%82%98 aria-label="왜 만들었나?">왜 만들었나?</a></li>
<li>
<a href=#centos-7--flask--gunicorn--nginx aria-label="CentOS 7 + Flask + gunicorn + Nginx">CentOS 7 + Flask + gunicorn + Nginx</a><ul>
<li>
<a href=#centos-7 aria-label="CentOS 7">CentOS 7</a></li>
<li>
<a href=#flaskhttpsflaskpalletsprojectscomen20x aria-label=Flask><a href=https://flask.palletsprojects.com/en/2.0.x/>Flask</a></a></li>
<li>
<a href=#gunicornhttpsgunicornorg aria-label=gunicorn><a href=https://gunicorn.org/>gunicorn</a></a></li>
<li>
<a href=#nginxhttpswwwnginxcom aria-label=Nginx><a href=https://www.nginx.com/>Nginx</a></a></li></ul>
</li>
<li>
<a href=#%ec%9d%b4%ec%99%b8%ec%9d%98-%ec%84%a4%ec%a0%95%eb%93%a4 aria-label="이외의 설정들">이외의 설정들</a><ul>
<li>
<a href=#frontend aria-label=FrontEnd>FrontEnd</a></li>
<li>
<a href=#url aria-label=URL>URL</a></li></ul>
</li>
<li>
<a href=#%ec%84%a4%ec%b9%98 aria-label=설치>설치</a></li>
<li>
<a href=#%ec%84%9c%eb%b9%84%ec%8a%a4 aria-label=서비스>서비스</a></li>
<li>
<a href=#%ea%b2%b0%ea%b3%bc aria-label=결과>결과</a></li>
<li>
<a href=#%ed%9b%84%ea%b8%b0 aria-label=후기>후기</a></li>
<li>
<a href=#reference aria-label=Reference>Reference</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><h2 id=intro>Intro<a hidden class=anchor aria-hidden=true href=#intro>#</a></h2>
<p>본 포스팅은 Python의 한국어 형태소 분석 라이브러리인 <a href=https://konlpy.org/en/latest/>konlpy</a>를 활용하여 CentOS 7 + Flask + gunicorn + Nginx 조합으로 웹 애플리케이션 서비스를 만들어본 토이 프로젝트 개발기다. 개발된 서비스는 <a href=http://flakonlpy.kro.kr/>링크(클릭)</a>를 통하여 이동하면 사용할 수 있으나, 이용자에게 제공되는 완전하고 안정된 형태의 서비스라기보다 Oracle Cloud의 무료 티어를 활용해보기 위한 테스트 목적이 강하므로 이 점을 인지하여 준다면 감사할 것 같다. (갑자기 다운되거나 오류 발생 확률 매우매우매우 높음ㅠㅠ)</p>
<h2 id=왜-만들었나>왜 만들었나?<a hidden class=anchor aria-hidden=true href=#왜-만들었나>#</a></h2>
<p>취직하여 일을 시작한 지 얼마 되지 않았을 무렵, 사내 팀에서 AWS를 사용하고 있어 자연스레 클라우드 환경에 관심이 많아진 상태였다. 물론, 대학원생 시절 AWS와 GCP를 사용해본 적은 있으나 (딥러닝 모델 학습하다가 한달에 몇백만원 찍히고 놀래서 서버 다 내린 건 언젠가 풀 또 하나의 이야기&mldr;) 완전히 친숙하다고 이야기하기엔 아주 애매한 사이였고, 클라우드 환경 하에서 웹 애플리케이션 서비스를 하나 만들어 배포해보면 지금보다는 더 익숙해지지 않을까 라는 결론에 자연스레 이르렀다.</p>
<p>AWS와 GCP 중 어떤 걸 선택하여 테스트해볼까 고민하던 중, Oracle Cloud의 무료 티어가 눈에 들어오게 되었고 생각보다 괜찮은 사양이었기 때문에 이왕 해보는 거 기존에 사용해본 적 없었던 것을 사용해보자라는 마음으로 Oracle Cloud를 선택하게 되었다.</p>
<p>처음 목적은 클라우드 환경과 친숙해지기 + flask와 gunicorn 조합을 활용해보기 였기 때문에 석사과정 때 몇 날 며칠을 밤새 만들었던 &lsquo;<a href="https://www.dbpia.co.kr/journal/articleDetail?nodeId=NODE07207339">한국어 형태소 분석기</a>&rsquo; 의 데모 서비스를 그대로 올려 사용하려 했다. 하지만 무료 티어의 한계로 인해(ㅠㅠ) 선학습된 tensorflow 모델을 올릴 때 memory out이 발생하는 등의 자원부족으로 인한 오류가 발생하였고, 대체할 만한 가벼운 서비스를 빠르게 만들어보아야 겠다고 생각하게 되었다.</p>
<p><img loading=lazy src=/img/2021-06-01-flakonlpy01.PNG alt=2021-06-01-flakonlpy01.PNG>
</p>
<p>무언가를 입력하면 어떠한 결과가 출력되는 형태의 서비스를 생각하다보니, konlpy에서 지원하는 형태소 분석기마다의 모든 결과를 뿌릴 수 있도록 하는 웹페이지를 만들면 어떨까 하는 생각이 들었다. 화면도 조금만 수정하면 될 것 같아서 빠르게 실행에 옮겼다.</p>
<h2 id=centos-7--flask--gunicorn--nginx>CentOS 7 + Flask + gunicorn + Nginx<a hidden class=anchor aria-hidden=true href=#centos-7--flask--gunicorn--nginx>#</a></h2>
<p>OS는 CentOS 7로 결정하고, Flask와 gunicorn 조합을 활용해보기로 마음 먹었다. 아래는 간략한 설명(을 가장한 사족)이다.</p>
<h3 id=centos-7>CentOS 7<a hidden class=anchor aria-hidden=true href=#centos-7>#</a></h3>
<p>CentOS 8로 해볼까 하다가 지원 관련 이슈가 괜히 신경쓰여서 7로 선택했다. 선택해 놓고 보니 CentOS 지원 종료 이슈가 계속 마음에 걸려 언젠가는 <a href=https://rockylinux.org/ko/>Rocky Linux</a>로 변경해볼까 하는 생각이 계속 든다&mldr;</p>
<h3 id=flaskhttpsflaskpalletsprojectscomen20x><a href=https://flask.palletsprojects.com/en/2.0.x/>Flask</a><a hidden class=anchor aria-hidden=true href=#flaskhttpsflaskpalletsprojectscomen20x>#</a></h3>
<p>Flask는 Django와 달리 매우매우 가볍다. 또한, 붙이고 싶은 대로 이것저것 붙이는 것이 자유로운 웹 프레임워크다. Tensorflow로 선학습된 모델을 올려 가볍게 테스트용 서비스를 만들 때 자주 사용했었다. 하지만, 너무 자유로워서 이게 왜 돌아가는 거지 싶을 때가 종종 있었다&mldr;</p>
<h3 id=gunicornhttpsgunicornorg><a href=https://gunicorn.org/>gunicorn</a><a hidden class=anchor aria-hidden=true href=#gunicornhttpsgunicornorg>#</a></h3>
<p>기존에는 uwsgi를 자주 사용했었고, 이번에도 사용하려 하였다. 하지만, uwsgi가 자원을 많이 소모한다는 정보를 어디선가 들었고, 테스트의 목적이라면 전혀 사용해본 적이 없는 것을 사용해보아야 진정한 테스트가 아니겠는가라는 이유로 gunicorn을 활용하게 되었다. 실제로 적용해보고 나니 굉장히 쉽고 빨라서 다른 개발에도 사용하면 괜찮겠다란 생각이 들었다.</p>
<h3 id=nginxhttpswwwnginxcom><a href=https://www.nginx.com/>Nginx</a><a hidden class=anchor aria-hidden=true href=#nginxhttpswwwnginxcom>#</a></h3>
<p>Apache는 사내에서도 사용해 볼 일이 있었기 때문에 스터디 목적으로라도 Nginx를 적용해보아야 겠다는 생각을 했고, 실제로 적용해보니 굉장히 가볍고 빨랐다. 최대한 빠르게 만들어서 테스트해야지라는 목적에도 잘 부합하는 선택이었다고 생각한다.</p>
<h2 id=이외의-설정들>이외의 설정들<a hidden class=anchor aria-hidden=true href=#이외의-설정들>#</a></h2>
<h3 id=frontend>FrontEnd<a hidden class=anchor aria-hidden=true href=#frontend>#</a></h3>
<p>이전에 bootstrap 기반의 테마를 다운받아 적당히 커스텀했던 것을 가져와서 사용하였다. 당시 Frontend에 대한 경험이 너무 적었고, (물론 지금이라고 더 낫다고 할 순 없지만&mldr;) 물어볼 사람도 너무나 적었기 때문에 하나하나 뜯어가며 하드코딩했던 기억이 난다. 당시에도 반응형으로 만들고 싶었지만, 모바일을 비롯 해상도에 따라 깨져 보이는 것은 본인도 알고 있으며(ㅠㅠㅠ), 관련 분야 실력이 부족한 것을 한탄할 뿐이다.</p>
<h3 id=url>URL<a hidden class=anchor aria-hidden=true href=#url>#</a></h3>
<p>접근은 &lsquo;<a href=https://xn--220b31d95hq8o.xn--3e0b707e/>내도메인한국</a>&lsquo;에서 별도의 URL을 생성해서 redirect 해주는 형태로 쉽게 접근할 수 있도록 하였다. 실제 서비스가 아니기 때문에 SSL 같은 요소는 따로 적용하지 않았다.</p>
<h2 id=설치>설치<a hidden class=anchor aria-hidden=true href=#설치>#</a></h2>
<p>python 및 nginx 를 설치한다.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sudo yum install python-pip python-devel gcc nginx
</code></pre></div><p>Konlpy 라이브러리를 사용하기 위한 선행 설치 요건들을 설치해준다.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sudo yum install gcc-c++ java-1.8.0-openjdk-devel
sudo yum install curl git
bash &lt;<span class=o>(</span>curl -s https://raw.githubusercontent.com/konlpy/konlpy/master/scripts/mecab.sh<span class=o>)</span>
</code></pre></div><p>설치가 완료되면, pip를 통하여 flask와 gunicorn을 설치해준다.</p>
<p>관리가 용이하도록 virtualenv 모듈을 통하여 가상환경을 만들어 설치해주었다.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>virtualenv venv
<span class=nb>source</span> venv/bin/activate

pip install gunicorn flask konlpy
</code></pre></div><p>설치 완료 후, konlpy 라이브러리가 잘 설치되었는지 확인해보았다.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>konlpy</span>
<span class=n>mecab</span> <span class=o>=</span> <span class=n>konlpy</span><span class=o>.</span><span class=n>tab</span><span class=o>.</span><span class=n>Mecab</span><span class=p>()</span>
<span class=nb>print</span><span class=p>(</span><span class=n>mecab</span><span class=o>.</span><span class=n>pos</span><span class=p>(</span><span class=s2>&#34;아버지가 방에 들어가신다.&#34;</span><span class=p>))</span>
</code></pre></div><p>확인 결과 다음과 같이 출력이 잘 되었다.</p>
<p><img loading=lazy src=/img/2021-06-01-flakonlpy06.JPG alt=2021-06-01-flakonlpy06.JPG>
</p>
<p>gunicorn을 실행하기 위하여 wsgi.py 를 만든 뒤, 다음의 명령어를 입력한다.</p>
<ul>
<li>wsgi.py</li>
</ul>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>gunicorn --bind 0.0.0.0:5000 wsgi:app
</code></pre></div><p><img loading=lazy src=/img/2021-06-01-flakonlpy07.JPG alt=2021-06-01-flakonlpy07.JPG>
</p>
<p>이제 시스템에 서비스를 등록하고, 관련 설정을 해준다.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sudo vi /etc/systemd/system/flask_konlpy_webapp.service
</code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=o>[</span>Unit<span class=o>]</span>
<span class=nv>Description</span><span class=o>=</span>Gunicorn instance to serve flask_konlpy_webapp
<span class=nv>After</span><span class=o>=</span>network.target

<span class=o>[</span>Service<span class=o>]</span>
<span class=nv>User</span><span class=o>=</span>opc
<span class=nv>Group</span><span class=o>=</span>nginx
<span class=nv>WorkingDirectory</span><span class=o>=</span>/home/opc/flask_konlpy_webapp
<span class=nv>Environment</span><span class=o>=</span><span class=s2>&#34;PATH=/home/opc/flask_konlpy_webapp/venv/bin&#34;</span>
<span class=nv>ExecStart</span><span class=o>=</span>/home/opc/flask_konlpy_webapp/venv/bin/gunicorn --workers <span class=m>3</span> -t <span class=m>120</span> --bind unix:flask_konlpy_webapp.sock -m <span class=m>007</span> wsgi:app

<span class=o>[</span>Install<span class=o>]</span>
<span class=nv>WantedBy</span><span class=o>=</span>multi-user.target
</code></pre></div><p>서비스를 시작하고 서비스의 상태를 확인해보자.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sudo systemctl start flask_konlpy_webapp.service
sudo systemctl <span class=nb>enable</span> flask_konlpy_webapp.service
sudo systemctl status flask_konlpy_webapp.service
</code></pre></div><p>Active: active (running) 으로 잘 실행되고 있음을 확인할 수 있다.</p>
<p><img loading=lazy src=/img/2021-06-01-flakonlpy08.JPG alt=2021-06-01-flakonlpy08.JPG>
</p>
<p>Nginx 관련 설정은 다음과 같이 진행한다.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sudo vi /etc/nginx/nginx.conf
</code></pre></div><p>Server 부분을 찾아서 다음과 같이 추가 및 수정해준다.</p>
<p>server_name 부분의 server_domain_or_IP는 본인의 환경에 맞게 설정해준다.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>    server <span class=o>{</span>
        listen 80<span class=p>;</span>
        server_name server_domain_or_IP<span class=p>;</span>

        include /etc/nginx/default.d/*.conf<span class=p>;</span>

        location / <span class=o>{</span>
            proxy_set_header Host <span class=nv>$http_host</span><span class=p>;</span>
            proxy_set_header X-Real-IP <span class=nv>$remote_addr</span><span class=p>;</span>
            proxy_set_header X-Forwarded-For <span class=nv>$proxy_add_x_forwarded_for</span><span class=p>;</span>
            proxy_set_header X-Forwarded-Proto <span class=nv>$scheme</span><span class=p>;</span>
            proxy_http_version 1.1<span class=p>;</span>
            proxy_set_header Connection <span class=s2>&#34;&#34;</span><span class=p>;</span>
            proxy_pass http://unix:/home/opc/flask_konlpy_webapp/flask_konlpy_webapp.sock<span class=p>;</span>
        <span class=o>}</span>
        error_page <span class=m>404</span> /404.html<span class=p>;</span>
            <span class=nv>location</span> <span class=o>=</span> /40x.html <span class=o>{</span>
        <span class=o>}</span>
        error_page <span class=m>500</span> <span class=m>502</span> <span class=m>503</span> <span class=m>504</span> /50x.html<span class=p>;</span>
            <span class=nv>location</span> <span class=o>=</span> /50x.html <span class=o>{</span>
        <span class=o>}</span>
    <span class=o>}</span>
</code></pre></div><p>Nginx 관련 접근 권한 및 설정을 변경해준다.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sudo usermod -a -G opc nginx
chmod <span class=m>710</span> /home/opc
sudo nginx -t
</code></pre></div><p>Nginx 설정이 완료되었다면, Nginx 서비스를 시작해주도록 하자.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sudo systemctl start nginx
sudo systemctl <span class=nb>enable</span> nginx
</code></pre></div><p>Active: active (running) 으로 잘 실행되고 있음을 확인할 수 있다.</p>
<p><img loading=lazy src=/img/2021-06-01-flakonlpy09.JPG alt=2021-06-01-flakonlpy09.JPG>
</p>
<h2 id=서비스>서비스<a hidden class=anchor aria-hidden=true href=#서비스>#</a></h2>
<p>서비스는 <a href=http://flakonlpy.kro.kr/>링크</a>를 선택하면 사용할 수 있고, 링크를 선택하면 다음과 같은 화면이 나온다.</p>
<p>아무 소개가 없으면 너무 허전할 것 같아 간단한 소개와 형태소 분석 입출력 창으로 이동하는 버튼을 만들어 놓았다. (그래도 휑해보이는 건 디자인 감각이 부족한 탓으로 돌려본다&mldr;ㅠㅠ)</p>
<p><img loading=lazy src=/img/2021-06-01-flakonlpy02.PNG alt=2021-06-01-flakonlpy02.PNG>
</p>
<p><strong>Click Me !</strong> 라는 (<del>다소 어이없는</del>) 문구의 버튼을 클릭하면 형태소 분석 입출력 창으로 이동하게 되며, 원하는 형태소 분석기를 선택 후 <strong>Analysis</strong> 버튼을 누르면 해당되는 형태소 분석기를 통해 분석된 결과가 분석 결과 창에 출력되도록 했다.</p>
<p><img loading=lazy src=/img/2021-06-01-flakonlpy03.PNG alt=2021-06-01-flakonlpy03.PNG>
</p>
<p>형태소 분석기의 경우 다음의 5가지 중 하나를 선택할 수 있고, 각 형태소 분석기마다의 결과는 다음과 같다. 입력 문장은 &lsquo;아버지가방에들어가셨다.&lsquo;로 하였으며, 띄어쓰기를 하지 않은 이유는 형태소 분석기들이 &lsquo;아버지가/방에&rsquo;로 분석할지 &lsquo;아버지/가방에&rsquo;로 분석할지 궁금해서였다. 분석 결과는 어절 단위와 음절 단위 중 이용하는 형태소 분석기에 따라 입력 값의 전처리 방향에 대해 조금이나마 도움을 줄 수 있지 않을까 싶었다.</p>
<ul>
<li>
<p><a href=http://kkma.snu.ac.kr/>꼬꼬마</a></p>
<ul>
<li>
<p>&lsquo;아버지&rsquo;와 &lsquo;가방&rsquo;으로 분석되었다.</p>
</li>
<li>
<p><img loading=lazy src=/img/2021-06-01-flakonlpykkma.PNG alt=2021-06-01-flakonlpykkma.PNG>
</p>
</li>
</ul>
</li>
<li>
<p><a href=https://github.com/shin285/KOMORAN>코모란</a></p>
<ul>
<li>
<p>&lsquo;아버지&rsquo;와 &lsquo;가방&rsquo;으로 분석되었다.</p>
</li>
<li>
<p><img loading=lazy src=/img/2021-06-01-flakonlpykomoran.PNG alt=2021-06-01-flakonlpykomoran.PNG>
</p>
</li>
</ul>
</li>
<li>
<p><a href=http://semanticweb.kaist.ac.kr/home/index.php/HanNanum>한나눔</a></p>
<ul>
<li>
<p>&lsquo;아버지가방에들어가&rsquo;로 분석된 것으로 보아 음절 단위의 분석은 다소 어려움이 있는 것으로 보인다.</p>
</li>
<li>
<p><img loading=lazy src=/img/2021-06-01-flakonlpyhannanum.PNG alt=2021-06-01-flakonlpyhannanum.PNG>
</p>
</li>
</ul>
</li>
<li>
<p><a href=http://eunjeon.blogspot.com/>Mecab</a></p>
<ul>
<li>
<p>&lsquo;아버지&rsquo; 와 &lsquo;방&rsquo;으로 분석되었다.</p>
</li>
<li>
<p><img loading=lazy src=/img/2021-06-01-flakonlpymecab.PNG alt=2021-06-01-flakonlpymecab.PNG>
</p>
</li>
</ul>
</li>
<li>
<p><a href=https://github.com/open-korean-text/open-korean-text>Okt</a></p>
<ul>
<li>
<p>&lsquo;아버지&rsquo; 와 &lsquo;가방&rsquo;으로 분석되었다.</p>
</li>
<li>
<p><img loading=lazy src=/img/2021-06-01-flakonlpyokt.PNG alt=2021-06-01-flakonlpyokt.PNG>
</p>
</li>
</ul>
</li>
</ul>
<h2 id=결과>결과<a hidden class=anchor aria-hidden=true href=#결과>#</a></h2>
<p>물론, 예시 문장 하나만으로 어떠한 형태소 분석기가 음절 단위의 형태소 분석을 모두 잘 해낸다와 같은 결과는 과도한 해석일 것이다. 다만, konlpy에서 지원하는 한국어 형태소 분석기는 어절 단위의 분석이 음절 단위의 분석보다 분석 정확도가 높으므로 형태소 분석기를 사용할 때 입력 값을 적절히 전처리 해주면 보다 좋은 분석 결과를 도출할 수 있다라는 (<del>당연한 결과는</del>) 것은 알 수 있었다.</p>
<p>물론 해당 서비스의 개발 목적이 형태소 분석기 자체가 아니라 Flask + gunicorn + Nginx 조합으로 웹 애플리케이션 서비스를 배포해보자 라는 목적이었기 때문에 일련의 성과는 얻을 수 있었다고 생각한다. 간단한 형태의 서비스도 이렇게나 머리 아픈데 완전한 형태의 서비스를 만들고, 지속적으로 유지보수 및 업데이트 해나가는 개발자 분들에게 존경을 표하는 바이다&mldr;</p>
<h2 id=후기>후기<a hidden class=anchor aria-hidden=true href=#후기>#</a></h2>
<ul>
<li>KKma와 okt가 다른 형태소 분석기에 비해 유독 느리다. 일정 시간이 넘어버리면 timeout이 되어 아예 오류 페이지로 이동해버린다. (ㅠㅠ)</li>
<li>.sock 서비스 접근 권한 오류가 발생했었다. 처음엔 에러 원인도 몰랐다가 error_log를 찍어서 보니 접근 권한 오류가 발생한 것을 확인할 수 있었고, 수정했다.</li>
<li>Oracle Cloud의 무료 티어가 생각보다 쓸만하다는 생각이 계속 들었다. 간단한 서비스라면 무료 티어를 활용하는 방안도 하나의 선택지가 될 것으로 보인다.</li>
<li>설계 자체에 대한 아쉬움이 계속 남는다. 석사과정 당시엔 관련 서비스 설계에 대한 지식이 부족했고, 돌아만 가면 되지라는 생각으로 만들었던 서비스이기 때문에 완성도가 굉장히 조악하다. 만약 지금이라면 구조 자체를 형태소 분석기 모델이 돌아가는 RESTAPI 서버 하나와 React or Vue로 구성된 FrontEnd 서버 하나로 이원화시켜 운영할 것 같다. Backend는 값에 대해서만 처리하고, Frontend에서는 입출력단만 처리하여 뿌릴 수 있도록 하는 형태로 하면 어땠을까 생각해본다.</li>
<li>개발된 코드는 <a href=https://github.com/zellyshu/flakonlpy>Github</a>에 올려두었다. 굉장히 조악하고, 미흡한 코드지만 조금이나마 도움이 되었으면 한다&mldr;</li>
</ul>
<h2 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h2>
<ul>
<li><a href=https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-gunicorn-and-nginx-on-centos-7>https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-gunicorn-and-nginx-on-centos-7</a></li>
</ul>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://zellyshu.github.io/tags/centos7/>CentOS7</a></li>
<li><a href=https://zellyshu.github.io/tags/flask/>Flask</a></li>
<li><a href=https://zellyshu.github.io/tags/gunicorn/>gunicorn</a></li>
<li><a href=https://zellyshu.github.io/tags/nginx/>Nginx</a></li>
<li><a href=https://zellyshu.github.io/tags/python/>Python</a></li>
<li><a href=https://zellyshu.github.io/tags/oraclecloud/>OracleCloud</a></li>
<li><a href=https://zellyshu.github.io/tags/konlpy/>Konlpy</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://zellyshu.github.io/posts/2021-09-14-tabpy-intro/>
<span class=title>« Prev Page</span>
<br>
<span>TabPy 설치 테스트</span>
</a>
<a class=next href=https://zellyshu.github.io/posts/2021-04-15-ibm-cloud/>
<span class=title>Next Page »</span>
<br>
<span>IBM Cloud 가입부터 간단한 설정까지</span>
</a>
</nav>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share CentOS 7 + Flask + gunicorn + Nginx 조합으로 Oracle Cloud에서 돌아가는 서비스 만들어보기 on twitter" href="https://twitter.com/intent/tweet/?text=CentOS%207%20%2b%20Flask%20%2b%20gunicorn%20%2b%20Nginx%20%ec%a1%b0%ed%95%a9%ec%9c%bc%eb%a1%9c%20Oracle%20Cloud%ec%97%90%ec%84%9c%20%eb%8f%8c%ec%95%84%ea%b0%80%eb%8a%94%20%ec%84%9c%eb%b9%84%ec%8a%a4%20%eb%a7%8c%eb%93%a4%ec%96%b4%eb%b3%b4%ea%b8%b0&url=https%3a%2f%2fzellyshu.github.io%2fposts%2f2021-06-01-flakonlpy%2f&hashtags=CentOS7%2cFlask%2cgunicorn%2cNginx%2cPython%2cOracleCloud%2cKonlpy"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share CentOS 7 + Flask + gunicorn + Nginx 조합으로 Oracle Cloud에서 돌아가는 서비스 만들어보기 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fzellyshu.github.io%2fposts%2f2021-06-01-flakonlpy%2f&title=CentOS%207%20%2b%20Flask%20%2b%20gunicorn%20%2b%20Nginx%20%ec%a1%b0%ed%95%a9%ec%9c%bc%eb%a1%9c%20Oracle%20Cloud%ec%97%90%ec%84%9c%20%eb%8f%8c%ec%95%84%ea%b0%80%eb%8a%94%20%ec%84%9c%eb%b9%84%ec%8a%a4%20%eb%a7%8c%eb%93%a4%ec%96%b4%eb%b3%b4%ea%b8%b0&summary=CentOS%207%20%2b%20Flask%20%2b%20gunicorn%20%2b%20Nginx%20%ec%a1%b0%ed%95%a9%ec%9c%bc%eb%a1%9c%20Oracle%20Cloud%ec%97%90%ec%84%9c%20%eb%8f%8c%ec%95%84%ea%b0%80%eb%8a%94%20%ec%84%9c%eb%b9%84%ec%8a%a4%20%eb%a7%8c%eb%93%a4%ec%96%b4%eb%b3%b4%ea%b8%b0&source=https%3a%2f%2fzellyshu.github.io%2fposts%2f2021-06-01-flakonlpy%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share CentOS 7 + Flask + gunicorn + Nginx 조합으로 Oracle Cloud에서 돌아가는 서비스 만들어보기 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fzellyshu.github.io%2fposts%2f2021-06-01-flakonlpy%2f&title=CentOS%207%20%2b%20Flask%20%2b%20gunicorn%20%2b%20Nginx%20%ec%a1%b0%ed%95%a9%ec%9c%bc%eb%a1%9c%20Oracle%20Cloud%ec%97%90%ec%84%9c%20%eb%8f%8c%ec%95%84%ea%b0%80%eb%8a%94%20%ec%84%9c%eb%b9%84%ec%8a%a4%20%eb%a7%8c%eb%93%a4%ec%96%b4%eb%b3%b4%ea%b8%b0"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share CentOS 7 + Flask + gunicorn + Nginx 조합으로 Oracle Cloud에서 돌아가는 서비스 만들어보기 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fzellyshu.github.io%2fposts%2f2021-06-01-flakonlpy%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share CentOS 7 + Flask + gunicorn + Nginx 조합으로 Oracle Cloud에서 돌아가는 서비스 만들어보기 on whatsapp" href="https://api.whatsapp.com/send?text=CentOS%207%20%2b%20Flask%20%2b%20gunicorn%20%2b%20Nginx%20%ec%a1%b0%ed%95%a9%ec%9c%bc%eb%a1%9c%20Oracle%20Cloud%ec%97%90%ec%84%9c%20%eb%8f%8c%ec%95%84%ea%b0%80%eb%8a%94%20%ec%84%9c%eb%b9%84%ec%8a%a4%20%eb%a7%8c%eb%93%a4%ec%96%b4%eb%b3%b4%ea%b8%b0%20-%20https%3a%2f%2fzellyshu.github.io%2fposts%2f2021-06-01-flakonlpy%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share CentOS 7 + Flask + gunicorn + Nginx 조합으로 Oracle Cloud에서 돌아가는 서비스 만들어보기 on telegram" href="https://telegram.me/share/url?text=CentOS%207%20%2b%20Flask%20%2b%20gunicorn%20%2b%20Nginx%20%ec%a1%b0%ed%95%a9%ec%9c%bc%eb%a1%9c%20Oracle%20Cloud%ec%97%90%ec%84%9c%20%eb%8f%8c%ec%95%84%ea%b0%80%eb%8a%94%20%ec%84%9c%eb%b9%84%ec%8a%a4%20%eb%a7%8c%eb%93%a4%ec%96%b4%eb%b3%b4%ea%b8%b0&url=https%3a%2f%2fzellyshu.github.io%2fposts%2f2021-06-01-flakonlpy%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div>
</footer><script src=https://utteranc.es/client.js repo=zellyshu/blog-comments issue-term=pathname theme=github-dark crossorigin=anonymous async></script>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=https://zellyshu.github.io/>ZS Log</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>